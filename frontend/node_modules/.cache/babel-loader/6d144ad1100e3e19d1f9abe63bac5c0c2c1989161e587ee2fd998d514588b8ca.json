{"ast":null,"code":"import React,{useState,useEffect}from'react';import GameCard from'./GameCard';import'../style/GameContainer.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GameContainer=_ref=>{let{searchTerm,genre,developer,publisher,ratingRange}=_ref;const[games,setGames]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[currentPage,setCurrentPage]=useState(0);const gamesPerPage=15;useEffect(()=>{const fetchGames=async()=>{try{const response=await fetch('http://localhost:5000/api/games');if(!response.ok){throw new Error('Failed to fetch games');}const data=await response.json();setGames(data);}catch(err){setError(err.message);}finally{setLoading(false);}};fetchGames();},[]);// Filter games based on the search term and filters\nconst filteredGames=games.filter(game=>{const matchesSearchTerm=game.name.toLowerCase().includes(searchTerm.toLowerCase());const matchesGenre=genre?game.genre===genre:true;const matchesDeveloper=developer?game.developer===developer:true;const matchesPublisher=publisher?game.publisher===publisher:true;const matchesRating=(ratingRange.min?game.rating>=ratingRange.min:true)&&(ratingRange.max?game.rating<=ratingRange.max:true);return matchesSearchTerm&&matchesGenre&&matchesDeveloper&&matchesPublisher&&matchesRating;});const totalPages=Math.ceil(filteredGames.length/gamesPerPage);// Reset currentPage when searchTerm or filters change\nuseEffect(()=>{setCurrentPage(0);},[searchTerm,genre,developer,publisher,ratingRange]);const handleNext=()=>{if(currentPage<totalPages-1){setCurrentPage(currentPage+1);}};const handlePrevious=()=>{if(currentPage>0){setCurrentPage(currentPage-1);}};// Determine which games to display on the current page\nconst currentGames=filteredGames.slice(currentPage*gamesPerPage,(currentPage+1)*gamesPerPage);return/*#__PURE__*/_jsxs(\"div\",{className:\"game-card-container\",\"aria-live\":\"polite\",children:[loading&&/*#__PURE__*/_jsx(\"h2\",{\"aria-live\":\"assertive\",children:\"Loading games...\"}),error&&/*#__PURE__*/_jsxs(\"h2\",{className:\"error-message\",\"aria-live\":\"assertive\",children:[\"Error loading games: \",error]}),currentGames.length>0?currentGames.map(game=>/*#__PURE__*/_jsx(GameCard,{...game},game.id)):!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"no-games\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"No games found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Try searching for something else.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrevious,disabled:currentPage===0,children:\"Previous\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNext,disabled:currentPage===totalPages-1,children:\"Next\"})]})]});};export default GameContainer;","map":{"version":3,"names":["React","useState","useEffect","GameCard","jsx","_jsx","jsxs","_jsxs","GameContainer","_ref","searchTerm","genre","developer","publisher","ratingRange","games","setGames","loading","setLoading","error","setError","currentPage","setCurrentPage","gamesPerPage","fetchGames","response","fetch","ok","Error","data","json","err","message","filteredGames","filter","game","matchesSearchTerm","name","toLowerCase","includes","matchesGenre","matchesDeveloper","matchesPublisher","matchesRating","min","rating","max","totalPages","Math","ceil","length","handleNext","handlePrevious","currentGames","slice","className","children","map","id","onClick","disabled"],"sources":["D:/Full stack/MERN_Project/gameinfo/src/components/GameContainer.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport GameCard from './GameCard';\r\nimport '../style/GameContainer.css';\r\n\r\nconst GameContainer = ({ searchTerm, genre, developer, publisher, ratingRange }) => {\r\n  const [games, setGames] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [currentPage, setCurrentPage] = useState(0);\r\n  const gamesPerPage = 15;\r\n\r\n  useEffect(() => {\r\n    const fetchGames = async () => {\r\n      try {\r\n        const response = await fetch('http://localhost:5000/api/games');\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch games');\r\n        }\r\n        const data = await response.json();\r\n        setGames(data);\r\n      } catch (err) {\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchGames();\r\n  }, []);\r\n\r\n  // Filter games based on the search term and filters\r\n  const filteredGames = games.filter(game => {\r\n    const matchesSearchTerm = game.name.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesGenre = genre ? game.genre === genre : true;\r\n    const matchesDeveloper = developer ? game.developer === developer : true;\r\n    const matchesPublisher = publisher ? game.publisher === publisher : true;\r\n    const matchesRating = (\r\n      (ratingRange.min ? game.rating >= ratingRange.min : true) &&\r\n      (ratingRange.max ? game.rating <= ratingRange.max : true)\r\n    );\r\n\r\n    return matchesSearchTerm && matchesGenre && matchesDeveloper && matchesPublisher && matchesRating;\r\n  });\r\n\r\n  const totalPages = Math.ceil(filteredGames.length / gamesPerPage);\r\n\r\n  // Reset currentPage when searchTerm or filters change\r\n  useEffect(() => {\r\n    setCurrentPage(0);\r\n  }, [searchTerm, genre, developer, publisher, ratingRange]);\r\n\r\n  const handleNext = () => {\r\n    if (currentPage < totalPages - 1) {\r\n      setCurrentPage(currentPage + 1);\r\n    }\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    if (currentPage > 0) {\r\n      setCurrentPage(currentPage - 1);\r\n    }\r\n  };\r\n\r\n  // Determine which games to display on the current page\r\n  const currentGames = filteredGames.slice(currentPage * gamesPerPage, (currentPage + 1) * gamesPerPage);\r\n\r\n  return (\r\n    <div className=\"game-card-container\" aria-live=\"polite\">\r\n      {loading && <h2 aria-live=\"assertive\">Loading games...</h2>}\r\n      {error && <h2 className=\"error-message\" aria-live=\"assertive\">Error loading games: {error}</h2>}\r\n      {currentGames.length > 0 ? (\r\n        currentGames.map(game => (\r\n          <GameCard key={game.id} {...game} />\r\n        ))\r\n      ) : (\r\n        !loading && (\r\n          <div className=\"no-games\">\r\n            <h2>No games found</h2>\r\n            <p>Try searching for something else.</p>\r\n          </div>\r\n        )\r\n      )}\r\n      <div className=\"pagination-controls\">\r\n        <button onClick={handlePrevious} disabled={currentPage === 0}>\r\n          Previous\r\n        </button>\r\n        <button onClick={handleNext} disabled={currentPage === totalPages - 1 }>\r\n          Next\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameContainer;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpC,KAAM,CAAAC,aAAa,CAAGC,IAAA,EAA8D,IAA7D,CAAEC,UAAU,CAAEC,KAAK,CAAEC,SAAS,CAAEC,SAAS,CAAEC,WAAY,CAAC,CAAAL,IAAA,CAC7E,KAAM,CAACM,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACkB,KAAK,CAAEC,QAAQ,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACoB,WAAW,CAAEC,cAAc,CAAC,CAAGrB,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAAAsB,YAAY,CAAG,EAAE,CAEvBrB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAsB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,iCAAiC,CAAC,CAC/D,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,uBAAuB,CAAC,CAC1C,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAClCd,QAAQ,CAACa,IAAI,CAAC,CAChB,CAAE,MAAOE,GAAG,CAAE,CACZX,QAAQ,CAACW,GAAG,CAACC,OAAO,CAAC,CACvB,CAAC,OAAS,CACRd,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDM,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAS,aAAa,CAAGlB,KAAK,CAACmB,MAAM,CAACC,IAAI,EAAI,CACzC,KAAM,CAAAC,iBAAiB,CAAGD,IAAI,CAACE,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC7B,UAAU,CAAC4B,WAAW,CAAC,CAAC,CAAC,CACpF,KAAM,CAAAE,YAAY,CAAG7B,KAAK,CAAGwB,IAAI,CAACxB,KAAK,GAAKA,KAAK,CAAG,IAAI,CACxD,KAAM,CAAA8B,gBAAgB,CAAG7B,SAAS,CAAGuB,IAAI,CAACvB,SAAS,GAAKA,SAAS,CAAG,IAAI,CACxE,KAAM,CAAA8B,gBAAgB,CAAG7B,SAAS,CAAGsB,IAAI,CAACtB,SAAS,GAAKA,SAAS,CAAG,IAAI,CACxE,KAAM,CAAA8B,aAAa,CACjB,CAAC7B,WAAW,CAAC8B,GAAG,CAAGT,IAAI,CAACU,MAAM,EAAI/B,WAAW,CAAC8B,GAAG,CAAG,IAAI,IACvD9B,WAAW,CAACgC,GAAG,CAAGX,IAAI,CAACU,MAAM,EAAI/B,WAAW,CAACgC,GAAG,CAAG,IAAI,CACzD,CAED,MAAO,CAAAV,iBAAiB,EAAII,YAAY,EAAIC,gBAAgB,EAAIC,gBAAgB,EAAIC,aAAa,CACnG,CAAC,CAAC,CAEF,KAAM,CAAAI,UAAU,CAAGC,IAAI,CAACC,IAAI,CAAChB,aAAa,CAACiB,MAAM,CAAG3B,YAAY,CAAC,CAEjE;AACArB,SAAS,CAAC,IAAM,CACdoB,cAAc,CAAC,CAAC,CAAC,CACnB,CAAC,CAAE,CAACZ,UAAU,CAAEC,KAAK,CAAEC,SAAS,CAAEC,SAAS,CAAEC,WAAW,CAAC,CAAC,CAE1D,KAAM,CAAAqC,UAAU,CAAGA,CAAA,GAAM,CACvB,GAAI9B,WAAW,CAAG0B,UAAU,CAAG,CAAC,CAAE,CAChCzB,cAAc,CAACD,WAAW,CAAG,CAAC,CAAC,CACjC,CACF,CAAC,CAED,KAAM,CAAA+B,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI/B,WAAW,CAAG,CAAC,CAAE,CACnBC,cAAc,CAACD,WAAW,CAAG,CAAC,CAAC,CACjC,CACF,CAAC,CAED;AACA,KAAM,CAAAgC,YAAY,CAAGpB,aAAa,CAACqB,KAAK,CAACjC,WAAW,CAAGE,YAAY,CAAE,CAACF,WAAW,CAAG,CAAC,EAAIE,YAAY,CAAC,CAEtG,mBACEhB,KAAA,QAAKgD,SAAS,CAAC,qBAAqB,CAAC,YAAU,QAAQ,CAAAC,QAAA,EACpDvC,OAAO,eAAIZ,IAAA,OAAI,YAAU,WAAW,CAAAmD,QAAA,CAAC,kBAAgB,CAAI,CAAC,CAC1DrC,KAAK,eAAIZ,KAAA,OAAIgD,SAAS,CAAC,eAAe,CAAC,YAAU,WAAW,CAAAC,QAAA,EAAC,uBAAqB,CAACrC,KAAK,EAAK,CAAC,CAC9FkC,YAAY,CAACH,MAAM,CAAG,CAAC,CACtBG,YAAY,CAACI,GAAG,CAACtB,IAAI,eACnB9B,IAAA,CAACF,QAAQ,KAAmBgC,IAAI,EAAjBA,IAAI,CAACuB,EAAe,CACpC,CAAC,CAEF,CAACzC,OAAO,eACNV,KAAA,QAAKgD,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBnD,IAAA,OAAAmD,QAAA,CAAI,gBAAc,CAAI,CAAC,cACvBnD,IAAA,MAAAmD,QAAA,CAAG,mCAAiC,CAAG,CAAC,EACrC,CAER,cACDjD,KAAA,QAAKgD,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCnD,IAAA,WAAQsD,OAAO,CAAEP,cAAe,CAACQ,QAAQ,CAAEvC,WAAW,GAAK,CAAE,CAAAmC,QAAA,CAAC,UAE9D,CAAQ,CAAC,cACTnD,IAAA,WAAQsD,OAAO,CAAER,UAAW,CAACS,QAAQ,CAAEvC,WAAW,GAAK0B,UAAU,CAAG,CAAG,CAAAS,QAAA,CAAC,MAExE,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAhD,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}